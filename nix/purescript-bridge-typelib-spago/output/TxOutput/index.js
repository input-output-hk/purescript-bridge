// Generated by purs version 0.14.5
"use strict";
var Address = require("../Address/index.js");
var Control_Applicative = require("../Control.Applicative/index.js");
var Control_Bind = require("../Control.Bind/index.js");
var Data_Functor = require("../Data.Functor/index.js");
var Data_Map_Internal = require("../Data.Map.Internal/index.js");
var Data_Maybe = require("../Data.Maybe/index.js");
var Data_Newtype = require("../Data.Newtype/index.js");
var Scripts = require("../Scripts/index.js");
var Types_ByteArray = require("../Types.ByteArray/index.js");
var txOutRefToTransactionInput = function (v) {
    return Control_Bind.bind(Data_Maybe.bindMaybe)(Data_Functor.mapFlipped(Data_Maybe.functorMaybe)(Types_ByteArray.hexToByteArray(v.txId))(Data_Newtype.wrap()))(function (transactionId) {
        return Control_Applicative.pure(Data_Maybe.applicativeMaybe)(Data_Newtype.wrap()({
            transactionId: transactionId,
            index: v.index
        }));
    });
};
var transactionOutputToScriptOutput = function (v) {
    if (v.dataHash instanceof Data_Maybe.Just) {
        return Control_Bind.bind(Data_Maybe.bindMaybe)(Address.enterpriseAddressValidatorHash(v.address))(function (validatorHash) {
            return Control_Applicative.pure(Data_Maybe.applicativeMaybe)({
                validatorHash: validatorHash,
                value: v.amount,
                datumHash: v.dataHash.value0
            });
        });
    };
    if (v.dataHash instanceof Data_Maybe.Nothing) {
        return Data_Maybe.Nothing.value;
    };
    throw new Error("Failed pattern match at TxOutput (line 113, column 1 - line 114, column 61): " + [ v.constructor.name ]);
};
var transactionInputToTxOutRef = function (v) {
    return {
        txId: Types_ByteArray.byteArrayToHex(Data_Newtype.unwrap()(v.transactionId)),
        index: v.index
    };
};
var scriptOutputToTransactionOutput = function (networkId) {
    return function (v) {
        return {
            address: Scripts.validatorHashEnterpriseAddress(networkId)(v.validatorHash),
            amount: v.value,
            dataHash: new Data_Maybe.Just(v.datumHash)
        };
    };
};
var utxoIndexToUtxo = function (networkId) {
    return Data_Functor.map(Data_Map_Internal.functorMap)(scriptOutputToTransactionOutput(networkId));
};
var ogmiosDatumHashToDatumHash = function (str) {
    return Data_Functor.mapFlipped(Data_Maybe.functorMaybe)(Types_ByteArray.hexToByteArray(str))(Data_Newtype.wrap());
};
var ogmiosTxOutToScriptOutput = function (v) {
    if (v.datum instanceof Data_Maybe.Just) {
        return Control_Bind.bind(Data_Maybe.bindMaybe)(Address.ogmiosAddressToAddress(v.address))(function (address$prime) {
            return Control_Bind.bind(Data_Maybe.bindMaybe)(Address.enterpriseAddressValidatorHash(address$prime))(function (validatorHash) {
                return Control_Bind.bind(Data_Maybe.bindMaybe)(ogmiosDatumHashToDatumHash(v.datum.value0))(function (datumHash) {
                    return Control_Applicative.pure(Data_Maybe.applicativeMaybe)({
                        validatorHash: validatorHash,
                        value: v.value,
                        datumHash: datumHash
                    });
                });
            });
        });
    };
    if (v.datum instanceof Data_Maybe.Nothing) {
        return Data_Maybe.Nothing.value;
    };
    throw new Error("Failed pattern match at TxOutput (line 87, column 1 - line 87, column 74): " + [ v.constructor.name ]);
};
var ogmiosTxOutToTransactionOutput = function (v) {
    return Control_Bind.bind(Data_Maybe.bindMaybe)(Address.ogmiosAddressToAddress(v.address))(function (address$prime) {
        return Control_Bind.bind(Data_Maybe.bindMaybe)(Data_Maybe.maybe(new Data_Maybe.Just(Data_Maybe.Nothing.value))((function () {
            var $44 = Data_Functor.map(Data_Maybe.functorMaybe)(Data_Maybe.Just.create);
            return function ($45) {
                return $44(ogmiosDatumHashToDatumHash($45));
            };
        })())(v.datum))(function (dataHash) {
            return Control_Applicative.pure(Data_Maybe.applicativeMaybe)(Data_Newtype.wrap()({
                address: address$prime,
                amount: v.value,
                dataHash: dataHash
            }));
        });
    });
};
var datumHashToOgmiosDatumHash = (function () {
    var $46 = Data_Newtype.unwrap();
    return function ($47) {
        return Types_ByteArray.byteArrayToHex($46($47));
    };
})();
var scriptOutputToOgmiosTxOut = function (networkId) {
    return function (v) {
        return {
            address: Address.addressToOgmiosAddress(Scripts.validatorHashEnterpriseAddress(networkId)(v.validatorHash)),
            value: v.value,
            datum: Control_Applicative.pure(Data_Maybe.applicativeMaybe)(datumHashToOgmiosDatumHash(v.datumHash))
        };
    };
};
var transactionOutputToOgmiosTxOut = function (v) {
    return {
        address: Address.addressToOgmiosAddress(v.address),
        value: v.amount,
        datum: Data_Functor.map(Data_Maybe.functorMaybe)(datumHashToOgmiosDatumHash)(v.dataHash)
    };
};
module.exports = {
    datumHashToOgmiosDatumHash: datumHashToOgmiosDatumHash,
    ogmiosDatumHashToDatumHash: ogmiosDatumHashToDatumHash,
    ogmiosTxOutToScriptOutput: ogmiosTxOutToScriptOutput,
    ogmiosTxOutToTransactionOutput: ogmiosTxOutToTransactionOutput,
    scriptOutputToOgmiosTxOut: scriptOutputToOgmiosTxOut,
    scriptOutputToTransactionOutput: scriptOutputToTransactionOutput,
    transactionInputToTxOutRef: transactionInputToTxOutRef,
    transactionOutputToOgmiosTxOut: transactionOutputToOgmiosTxOut,
    transactionOutputToScriptOutput: transactionOutputToScriptOutput,
    txOutRefToTransactionInput: txOutRefToTransactionInput,
    utxoIndexToUtxo: utxoIndexToUtxo
};
